{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import restaurantApi from'../api/restaurantApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RestaurantList=()=>{const[restaurants,setRestaurants]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchRestaurants=async()=>{try{setLoading(true);console.log('üì± D√©but de la r√©cup√©ration des restaurants');// Utilisation de l'API avec URL relative\nconsole.log('üîç R√©cup√©ration des restaurants depuis l\\'API');const data=await restaurantApi.getRestaurants();console.log('üì¶ Restaurants r√©cup√©r√©s:',data);if(Array.isArray(data)){setRestaurants(data);}else if(data&&Array.isArray(data.restaurants)){setRestaurants(data.restaurants);}else{console.error('‚ùå Format de donn√©es inattendu:',data);setError('Format de donn√©es inattendu. Veuillez r√©essayer.');}}catch(err){console.error('‚ùå Erreur lors du chargement des restaurants:',err);setError(`Erreur lors du chargement des restaurants: ${err.message}`);}finally{setLoading(false);console.log('üèÅ Fin de la r√©cup√©ration des restaurants');}};fetchRestaurants();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8 flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg\",children:\"Chargement des restaurants...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"Restaurants\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 bg-primary text-white px-4 py-2 rounded\",onClick:()=>window.location.reload(),children:\"R\\xE9essayer\"})]}),restaurants.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Aucun restaurant disponible pour le moment.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:restaurants.map(restaurant=>{var _restaurant$categorie;return/*#__PURE__*/_jsx(Link,{to:`/restaurants/${restaurant.id}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\",children:[/*#__PURE__*/_jsx(\"img\",{src:restaurant.image||'https://via.placeholder.com/300x200',alt:restaurant.nom||restaurant.name,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:restaurant.nom||restaurant.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-2\",children:restaurant.cuisine||((_restaurant$categorie=restaurant.categories)===null||_restaurant$categorie===void 0?void 0:_restaurant$categorie[0])}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-500 mr-1\",children:\"\\u2605\"}),/*#__PURE__*/_jsx(\"span\",{children:restaurant.note||restaurant.rating})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-sm\",children:restaurant.tempsLivraisonEstime||restaurant.deliveryTime||`${restaurant.tempsLivraisonEstime} min`})]})]})]})},restaurant.id);})})]});};export default RestaurantList;","map":{"version":3,"names":["React","useState","useEffect","Link","restaurantApi","jsx","_jsx","jsxs","_jsxs","RestaurantList","restaurants","setRestaurants","loading","setLoading","error","setError","fetchRestaurants","console","log","data","getRestaurants","Array","isArray","err","message","className","children","onClick","window","location","reload","length","map","restaurant","_restaurant$categorie","to","id","src","image","alt","nom","name","cuisine","categories","note","rating","tempsLivraisonEstime","deliveryTime"],"sources":["/home/rapha/dev/delivery_app/client/src/pages/RestaurantList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport restaurantApi from '../api/restaurantApi';\n\nconst RestaurantList = () => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchRestaurants = async () => {\n      try {\n        setLoading(true);\n        console.log('üì± D√©but de la r√©cup√©ration des restaurants');\n        \n        // Utilisation de l'API avec URL relative\n        console.log('üîç R√©cup√©ration des restaurants depuis l\\'API');\n        const data = await restaurantApi.getRestaurants();\n        console.log('üì¶ Restaurants r√©cup√©r√©s:', data);\n        \n        if (Array.isArray(data)) {\n          setRestaurants(data);\n        } else if (data && Array.isArray(data.restaurants)) {\n          setRestaurants(data.restaurants);\n        } else {\n          console.error('‚ùå Format de donn√©es inattendu:', data);\n          setError('Format de donn√©es inattendu. Veuillez r√©essayer.');\n        }\n      } catch (err) {\n        console.error('‚ùå Erreur lors du chargement des restaurants:', err);\n        setError(`Erreur lors du chargement des restaurants: ${err.message}`);\n      } finally {\n        setLoading(false);\n        console.log('üèÅ Fin de la r√©cup√©ration des restaurants');\n      }\n    };\n\n    fetchRestaurants();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 flex justify-center items-center\">\n        <p className=\"text-lg\">Chargement des restaurants...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Restaurants</h1>\n      \n      {/* Affichage de l'erreur le cas √©ch√©ant */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\">\n          <p>{error}</p>\n          <button \n            className=\"mt-2 bg-primary text-white px-4 py-2 rounded\" \n            onClick={() => window.location.reload()}\n          >\n            R√©essayer\n          </button>\n        </div>\n      )}\n      \n      {restaurants.length === 0 ? (\n        <p>Aucun restaurant disponible pour le moment.</p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {restaurants.map((restaurant) => (\n            <Link to={`/restaurants/${restaurant.id}`} key={restaurant.id}>\n              <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\">\n                <img\n                  src={restaurant.image || 'https://via.placeholder.com/300x200'}\n                  alt={restaurant.nom || restaurant.name}\n                  className=\"w-full h-48 object-cover\"\n                />\n                <div className=\"p-4\">\n                  <h2 className=\"text-xl font-semibold mb-2\">{restaurant.nom || restaurant.name}</h2>\n                  <p className=\"text-gray-600 mb-2\">{restaurant.cuisine || restaurant.categories?.[0]}</p>\n                  <div className=\"flex justify-between items-center\">\n                    <div className=\"flex items-center\">\n                      <span className=\"text-yellow-500 mr-1\">‚òÖ</span>\n                      <span>{restaurant.note || restaurant.rating}</span>\n                    </div>\n                    <span className=\"text-gray-500 text-sm\">{restaurant.tempsLivraisonEstime || restaurant.deliveryTime || `${restaurant.tempsLivraisonEstime} min`}</span>\n                  </div>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RestaurantList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}